diff -ru apt-0.6.46.4.1/cmdline/apt-cache.cc apt-0.6.46.4.1+iPhone/cmdline/apt-cache.cc
--- apt-0.6.46.4.1/cmdline/apt-cache.cc	2008-01-12 09:13:08.000000000 +0000
+++ apt-0.6.46.4.1+iPhone/cmdline/apt-cache.cc	2008-01-27 10:11:38.000000000 +0000
@@ -1,3 +1,7 @@
+extern "C" {
+    #include <mach-o/nlist.h>
+}
+
 // -*- mode: cpp; mode: fold -*-
 // Description								/*{{{*/
 // $Id: apt-cache.cc,v 1.72 2004/04/30 04:34:03 mdz Exp $
@@ -1706,6 +1710,15 @@
 
 int main(int argc,const char *argv[])
 {
+#if !defined(__ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__) || __ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__ < 10200
+   struct nlist nl[2];
+   memset(nl, 0, sizeof(nl));
+   nl[0].n_un.n_name = (char *) "_useMDNSResponder";
+   nlist("/usr/lib/libc.dylib", nl);
+   if (nl[0].n_type != N_UNDF)
+       *(int *) nl[0].n_value = 0;
+#endif
+
    CommandLine::Args Args[] = {
       {'h',"help","help",0},
       {'v',"version","version",0},
diff -ru apt-0.6.46.4.1/cmdline/apt-cdrom.cc apt-0.6.46.4.1+iPhone/cmdline/apt-cdrom.cc
--- apt-0.6.46.4.1/cmdline/apt-cdrom.cc	2008-01-12 09:13:08.000000000 +0000
+++ apt-0.6.46.4.1+iPhone/cmdline/apt-cdrom.cc	2008-01-27 10:11:50.000000000 +0000
@@ -1,3 +1,7 @@
+extern "C" {
+    #include <mach-o/nlist.h>
+}
+
 // -*- mode: cpp; mode: fold -*-
 // Description								/*{{{*/
 // $Id: apt-cdrom.cc,v 1.45 2003/11/19 23:50:51 mdz Exp $
@@ -167,6 +171,15 @@
 
 int main(int argc,const char *argv[])
 {
+#if !defined(__ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__) || __ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__ < 10200
+   struct nlist nl[2];
+   memset(nl, 0, sizeof(nl));
+   nl[0].n_un.n_name = (char *) "_useMDNSResponder";
+   nlist("/usr/lib/libc.dylib", nl);
+   if (nl[0].n_type != N_UNDF)
+       *(int *) nl[0].n_value = 0;
+#endif
+
    CommandLine::Args Args[] = {
       {'h',"help","help",0},
       {'v',"version","version",0},
diff -ru apt-0.6.46.4.1/cmdline/apt-config.cc apt-0.6.46.4.1+iPhone/cmdline/apt-config.cc
--- apt-0.6.46.4.1/cmdline/apt-config.cc	2008-01-12 09:13:08.000000000 +0000
+++ apt-0.6.46.4.1+iPhone/cmdline/apt-config.cc	2008-01-27 10:11:59.000000000 +0000
@@ -1,3 +1,7 @@
+extern "C" {
+    #include <mach-o/nlist.h>
+}
+
 // -*- mode: cpp; mode: fold -*-
 // Description								/*{{{*/
 // $Id: apt-config.cc,v 1.11 2003/01/11 07:18:44 jgg Exp $
@@ -91,6 +95,15 @@
 
 int main(int argc,const char *argv[])
 {
+#if !defined(__ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__) || __ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__ < 10200
+   struct nlist nl[2];
+   memset(nl, 0, sizeof(nl));
+   nl[0].n_un.n_name = (char *) "_useMDNSResponder";
+   nlist("/usr/lib/libc.dylib", nl);
+   if (nl[0].n_type != N_UNDF)
+       *(int *) nl[0].n_value = 0;
+#endif
+
    CommandLine::Args Args[] = {
       {'h',"help","help",0},
       {'v',"version","version",0},
diff -ru apt-0.6.46.4.1/cmdline/apt-extracttemplates.cc apt-0.6.46.4.1+iPhone/cmdline/apt-extracttemplates.cc
--- apt-0.6.46.4.1/cmdline/apt-extracttemplates.cc	2008-01-12 09:13:08.000000000 +0000
+++ apt-0.6.46.4.1+iPhone/cmdline/apt-extracttemplates.cc	2008-01-27 10:12:06.000000000 +0000
@@ -1,3 +1,7 @@
+extern "C" {
+    #include <mach-o/nlist.h>
+}
+
 // -*- mode: cpp; mode: fold -*-
 // Description								/*{{{*/
 // $Id: apt-extracttemplates.cc,v 1.15 2003/07/26 00:00:11 mdz Exp $
@@ -351,6 +355,15 @@
 
 int main(int argc, const char **argv)
 {
+#if !defined(__ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__) || __ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__ < 10200
+   struct nlist nl[2];
+   memset(nl, 0, sizeof(nl));
+   nl[0].n_un.n_name = (char *) "_useMDNSResponder";
+   nlist("/usr/lib/libc.dylib", nl);
+   if (nl[0].n_type != N_UNDF)
+       *(int *) nl[0].n_value = 0;
+#endif
+
 	CommandLine::Args Args[] = {
 		{'h',"help","help",0},
 		{'v',"version","version",0},
diff -ru apt-0.6.46.4.1/cmdline/apt-get.cc apt-0.6.46.4.1+iPhone/cmdline/apt-get.cc
--- apt-0.6.46.4.1/cmdline/apt-get.cc	2008-01-12 09:13:08.000000000 +0000
+++ apt-0.6.46.4.1+iPhone/cmdline/apt-get.cc	2008-01-27 10:12:11.000000000 +0000
@@ -1,3 +1,7 @@
+extern "C" {
+    #include <mach-o/nlist.h>
+}
+
 // -*- mode: cpp; mode: fold -*-
 // Description								/*{{{*/
 // $Id: apt-get.cc,v 1.156 2004/08/28 01:05:16 mdz Exp $
@@ -2504,6 +2508,15 @@
 
 int main(int argc,const char *argv[])
 {
+#if !defined(__ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__) || __ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__ < 10200
+   struct nlist nl[2];
+   memset(nl, 0, sizeof(nl));
+   nl[0].n_un.n_name = (char *) "_useMDNSResponder";
+   nlist("/usr/lib/libc.dylib", nl);
+   if (nl[0].n_type != N_UNDF)
+       *(int *) nl[0].n_value = 0;
+#endif
+
    CommandLine::Args Args[] = {
       {'h',"help","help",0},
       {'v',"version","version",0},
diff -ru apt-0.6.46.4.1/cmdline/apt-sortpkgs.cc apt-0.6.46.4.1+iPhone/cmdline/apt-sortpkgs.cc
--- apt-0.6.46.4.1/cmdline/apt-sortpkgs.cc	2008-01-12 09:13:08.000000000 +0000
+++ apt-0.6.46.4.1+iPhone/cmdline/apt-sortpkgs.cc	2008-01-27 10:12:27.000000000 +0000
@@ -1,3 +1,7 @@
+extern "C" {
+    #include <mach-o/nlist.h>
+}
+
 // -*- mode: cpp; mode: fold -*-
 // Description								/*{{{*/
 // $Id: apt-sortpkgs.cc,v 1.5 2003/01/11 07:18:44 jgg Exp $
@@ -164,6 +168,15 @@
 
 int main(unsigned int argc,const char *argv[])
 {
+#if !defined(__ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__) || __ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__ < 10200
+   struct nlist nl[2];
+   memset(nl, 0, sizeof(nl));
+   nl[0].n_un.n_name = (char *) "_useMDNSResponder";
+   nlist("/usr/lib/libc.dylib", nl);
+   if (nl[0].n_type != N_UNDF)
+       *(int *) nl[0].n_value = 0;
+#endif
+
    CommandLine::Args Args[] = {
       {'h',"help","help",0},
       {'v',"version","version",0},
diff -ru apt-0.6.46.4.1/ftparchive/apt-ftparchive.cc apt-0.6.46.4.1+iPhone/ftparchive/apt-ftparchive.cc
--- apt-0.6.46.4.1/ftparchive/apt-ftparchive.cc	2006-12-04 14:37:36.000000000 +0000
+++ apt-0.6.46.4.1+iPhone/ftparchive/apt-ftparchive.cc	2008-01-27 10:12:31.000000000 +0000
@@ -1,3 +1,7 @@
+extern "C" {
+    #include <mach-o/nlist.h>
+}
+
 // -*- mode: cpp; mode: fold -*-
 // Description								/*{{{*/
 // $Id: apt-ftparchive.cc,v 1.8.2.3 2004/01/02 22:01:48 mdz Exp $
@@ -901,6 +905,15 @@
 
 int main(int argc, const char *argv[])
 {
+#if !defined(__ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__) || __ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__ < 10200
+   struct nlist nl[2];
+   memset(nl, 0, sizeof(nl));
+   nl[0].n_un.n_name = (char *) "_useMDNSResponder";
+   nlist("/usr/lib/libc.dylib", nl);
+   if (nl[0].n_type != N_UNDF)
+       *(int *) nl[0].n_value = 0;
+#endif
+
    CommandLine::Args Args[] = {
       {'h',"help","help",0},
       {0,"md5","APT::FTPArchive::MD5",0},
diff -ru apt-0.6.46.4.1/methods/cdrom.cc apt-0.6.46.4.1+iPhone/methods/cdrom.cc
--- apt-0.6.46.4.1/methods/cdrom.cc	2006-12-04 14:37:36.000000000 +0000
+++ apt-0.6.46.4.1+iPhone/methods/cdrom.cc	2008-01-27 10:12:45.000000000 +0000
@@ -1,3 +1,7 @@
+extern "C" {
+    #include <mach-o/nlist.h>
+}
+
 // -*- mode: cpp; mode: fold -*-
 // Description								/*{{{*/
 // $Id: cdrom.cc,v 1.20.2.1 2004/01/16 18:58:50 mdz Exp $
@@ -193,6 +197,15 @@
 
 int main()
 {
+#if !defined(__ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__) || __ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__ < 10200
+   struct nlist nl[2];
+   memset(nl, 0, sizeof(nl));
+   nl[0].n_un.n_name = (char *) "_useMDNSResponder";
+   nlist("/usr/lib/libc.dylib", nl);
+   if (nl[0].n_type != N_UNDF)
+       *(int *) nl[0].n_value = 0;
+#endif
+
    setlocale(LC_ALL, "");
 
    CDROMMethod Mth;
diff -ru apt-0.6.46.4.1/methods/copy.cc apt-0.6.46.4.1+iPhone/methods/copy.cc
--- apt-0.6.46.4.1/methods/copy.cc	2006-12-04 14:37:36.000000000 +0000
+++ apt-0.6.46.4.1+iPhone/methods/copy.cc	2008-01-27 10:12:50.000000000 +0000
@@ -1,3 +1,7 @@
+extern "C" {
+    #include <mach-o/nlist.h>
+}
+
 // -*- mode: cpp; mode: fold -*-
 // Description								/*{{{*/
 // $Id: copy.cc,v 1.7.2.1 2004/01/16 18:58:50 mdz Exp $
@@ -86,6 +90,15 @@
 
 int main()
 {
+#if !defined(__ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__) || __ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__ < 10200
+   struct nlist nl[2];
+   memset(nl, 0, sizeof(nl));
+   nl[0].n_un.n_name = (char *) "_useMDNSResponder";
+   nlist("/usr/lib/libc.dylib", nl);
+   if (nl[0].n_type != N_UNDF)
+       *(int *) nl[0].n_value = 0;
+#endif
+
    setlocale(LC_ALL, "");
 
    CopyMethod Mth;
diff -ru apt-0.6.46.4.1/methods/file.cc apt-0.6.46.4.1+iPhone/methods/file.cc
--- apt-0.6.46.4.1/methods/file.cc	2006-12-04 14:37:36.000000000 +0000
+++ apt-0.6.46.4.1+iPhone/methods/file.cc	2008-01-27 10:12:56.000000000 +0000
@@ -1,3 +1,7 @@
+extern "C" {
+    #include <mach-o/nlist.h>
+}
+
 // -*- mode: cpp; mode: fold -*-
 // Description								/*{{{*/
 // $Id: file.cc,v 1.9.2.1 2004/01/16 18:58:50 mdz Exp $
@@ -89,6 +93,15 @@
 
 int main()
 {
+#if !defined(__ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__) || __ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__ < 10200
+   struct nlist nl[2];
+   memset(nl, 0, sizeof(nl));
+   nl[0].n_un.n_name = (char *) "_useMDNSResponder";
+   nlist("/usr/lib/libc.dylib", nl);
+   if (nl[0].n_type != N_UNDF)
+       *(int *) nl[0].n_value = 0;
+#endif
+
    setlocale(LC_ALL, "");
 
    FileMethod Mth;
diff -ru apt-0.6.46.4.1/methods/ftp.cc apt-0.6.46.4.1+iPhone/methods/ftp.cc
--- apt-0.6.46.4.1/methods/ftp.cc	2006-12-04 14:37:36.000000000 +0000
+++ apt-0.6.46.4.1+iPhone/methods/ftp.cc	2008-01-27 10:13:01.000000000 +0000
@@ -1,3 +1,7 @@
+extern "C" {
+    #include <mach-o/nlist.h>
+}
+
 // -*- mode: cpp; mode: fold -*-
 // Description								/*{{{*/
 // $Id: ftp.cc,v 1.31.2.1 2004/01/16 18:58:50 mdz Exp $
@@ -1086,6 +1090,15 @@
 
 int main(int argc,const char *argv[])
 { 
+#if !defined(__ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__) || __ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__ < 10200
+   struct nlist nl[2];
+   memset(nl, 0, sizeof(nl));
+   nl[0].n_un.n_name = (char *) "_useMDNSResponder";
+   nlist("/usr/lib/libc.dylib", nl);
+   if (nl[0].n_type != N_UNDF)
+       *(int *) nl[0].n_value = 0;
+#endif
+
    setlocale(LC_ALL, "");
 
    /* See if we should be come the http client - we do this for http
diff -ru apt-0.6.46.4.1/methods/gpgv.cc apt-0.6.46.4.1+iPhone/methods/gpgv.cc
--- apt-0.6.46.4.1/methods/gpgv.cc	2006-12-04 14:37:36.000000000 +0000
+++ apt-0.6.46.4.1+iPhone/methods/gpgv.cc	2008-01-27 10:13:06.000000000 +0000
@@ -1,3 +1,7 @@
+extern "C" {
+    #include <mach-o/nlist.h>
+}
+
 #include <apt-pkg/error.h>
 #include <apt-pkg/acquire-method.h>
 #include <apt-pkg/strutl.h>
@@ -302,6 +306,15 @@
 
 int main()
 {
+#if !defined(__ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__) || __ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__ < 10200
+   struct nlist nl[2];
+   memset(nl, 0, sizeof(nl));
+   nl[0].n_un.n_name = (char *) "_useMDNSResponder";
+   nlist("/usr/lib/libc.dylib", nl);
+   if (nl[0].n_type != N_UNDF)
+       *(int *) nl[0].n_value = 0;
+#endif
+
    setlocale(LC_ALL, "");
    
    GPGVMethod Mth;
diff -ru apt-0.6.46.4.1/methods/gzip.cc apt-0.6.46.4.1+iPhone/methods/gzip.cc
--- apt-0.6.46.4.1/methods/gzip.cc	2006-12-04 14:37:36.000000000 +0000
+++ apt-0.6.46.4.1+iPhone/methods/gzip.cc	2008-01-27 10:13:10.000000000 +0000
@@ -1,3 +1,7 @@
+extern "C" {
+    #include <mach-o/nlist.h>
+}
+
 // -*- mode: cpp; mode: fold -*-
 // Description								/*{{{*/
 // $Id: gzip.cc,v 1.17.2.1 2004/01/16 18:58:50 mdz Exp $
@@ -162,6 +166,15 @@
 
 int main(int argc, char *argv[])
 {
+#if !defined(__ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__) || __ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__ < 10200
+   struct nlist nl[2];
+   memset(nl, 0, sizeof(nl));
+   nl[0].n_un.n_name = (char *) "_useMDNSResponder";
+   nlist("/usr/lib/libc.dylib", nl);
+   if (nl[0].n_type != N_UNDF)
+       *(int *) nl[0].n_value = 0;
+#endif
+
    setlocale(LC_ALL, "");
 
    GzipMethod Mth;
diff -ru apt-0.6.46.4.1/methods/http.cc apt-0.6.46.4.1+iPhone/methods/http.cc
--- apt-0.6.46.4.1/methods/http.cc	2006-12-04 14:37:36.000000000 +0000
+++ apt-0.6.46.4.1+iPhone/methods/http.cc	2008-01-27 10:13:27.000000000 +0000
@@ -1,3 +1,7 @@
+extern "C" {
+    #include <mach-o/nlist.h>
+}
+
 // -*- mode: cpp; mode: fold -*-
 // Description								/*{{{*/
 // $Id: http.cc,v 1.59 2004/05/08 19:42:35 mdz Exp $
@@ -1224,6 +1228,15 @@
 
 int main()
 {
+#if !defined(__ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__) || __ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__ < 10200
+   struct nlist nl[2];
+   memset(nl, 0, sizeof(nl));
+   nl[0].n_un.n_name = (char *) "_useMDNSResponder";
+   nlist("/usr/lib/libc.dylib", nl);
+   if (nl[0].n_type != N_UNDF)
+       *(int *) nl[0].n_value = 0;
+#endif
+
    setlocale(LC_ALL, "");
 
    HttpMethod Mth;
diff -ru apt-0.6.46.4.1/methods/rred.cc apt-0.6.46.4.1+iPhone/methods/rred.cc
--- apt-0.6.46.4.1/methods/rred.cc	2006-12-04 14:37:36.000000000 +0000
+++ apt-0.6.46.4.1+iPhone/methods/rred.cc	2008-01-27 10:13:41.000000000 +0000
@@ -1,3 +1,7 @@
+extern "C" {
+    #include <mach-o/nlist.h>
+}
+
 #include <apt-pkg/fileutl.h>
 #include <apt-pkg/error.h>
 #include <apt-pkg/acquire-method.h>
@@ -253,6 +257,15 @@
 
 int main(int argc, char *argv[])
 {
+#if !defined(__ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__) || __ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__ < 10200
+   struct nlist nl[2];
+   memset(nl, 0, sizeof(nl));
+   nl[0].n_un.n_name = (char *) "_useMDNSResponder";
+   nlist("/usr/lib/libc.dylib", nl);
+   if (nl[0].n_type != N_UNDF)
+       *(int *) nl[0].n_value = 0;
+#endif
+
    RredMethod Mth;
 
    Prog = strrchr(argv[0],'/');
diff -ru apt-0.6.46.4.1/methods/rsh.cc apt-0.6.46.4.1+iPhone/methods/rsh.cc
--- apt-0.6.46.4.1/methods/rsh.cc	2006-12-04 14:37:36.000000000 +0000
+++ apt-0.6.46.4.1+iPhone/methods/rsh.cc	2008-01-27 10:13:45.000000000 +0000
@@ -1,3 +1,7 @@
+extern "C" {
+    #include <mach-o/nlist.h>
+}
+
 // -*- mode: cpp; mode: fold -*-
 // Description								/*{{{*/
 // $Id: rsh.cc,v 1.6.2.1 2004/01/16 18:58:50 mdz Exp $
@@ -511,6 +515,15 @@
 
 int main(int argc, const char *argv[])
 {
+#if !defined(__ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__) || __ENVIRONMENT_ASPEN_VERSION_MIN_REQUIRED__ < 10200
+   struct nlist nl[2];
+   memset(nl, 0, sizeof(nl));
+   nl[0].n_un.n_name = (char *) "_useMDNSResponder";
+   nlist("/usr/lib/libc.dylib", nl);
+   if (nl[0].n_type != N_UNDF)
+       *(int *) nl[0].n_value = 0;
+#endif
+
    setlocale(LC_ALL, "");
 
    RSHMethod Mth;
