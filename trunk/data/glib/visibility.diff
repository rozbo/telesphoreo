diff -ru glib-2.12.13/configure.in glib-2.12.13+iPhone/configure.in
--- glib-2.12.13/configure.in	2007-07-16 18:57:18.000000000 +0000
+++ glib-2.12.13+iPhone/configure.in	2008-01-09 13:31:52.000000000 +0000
@@ -753,36 +753,7 @@
 
 # check for GNUC visibility support
 AC_MSG_CHECKING(for GNUC visibility attribute)
-GLIB_CHECK_COMPILE_WARNINGS([
-void
-__attribute__ ((visibility ("hidden")))
-     f_hidden (void)
-{
-}
-void
-__attribute__ ((visibility ("internal")))
-     f_internal (void)
-{
-}
-void
-__attribute__ ((visibility ("protected")))
-     f_protected (void)
-{
-}
-void
-__attribute__ ((visibility ("default")))
-     f_default (void)
-{
-}
-int main (int argc, char **argv)
-{
-	f_hidden();
-	f_internal();
-	f_protected();
-	f_default();
-	return 0;
-}
-],g_have_gnuc_visibility=yes,g_have_gnuc_visibility=no)
+g_have_gnuc_visibility=no
 AC_MSG_RESULT($g_have_gnuc_visibility)
 AM_CONDITIONAL(HAVE_GNUC_VISIBILITY, [test x$g_have_gnuc_visibility = xyes])
 
