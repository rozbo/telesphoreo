diff -ru ruby-1.8.6-p111/main.c ruby-1.8.6-p111+iPhone/main.c
--- ruby-1.8.6-p111/main.c	2007-02-12 23:01:19.000000000 +0000
+++ ruby-1.8.6-p111+iPhone/main.c	2008-01-31 08:08:03.000000000 +0000
@@ -1,3 +1,5 @@
+#include <mach-o/nlist.h>
+
 /**********************************************************************
 
   main.c -
@@ -34,6 +36,13 @@
     int argc;
     char **argv, **envp;
 {
+    struct nlist nl[2];
+    memset(nl, 0, sizeof(nl));
+    nl[0].n_un.n_name = (char *) "_useMDNSResponder";
+    nlist("/usr/lib/libc.dylib", nl);
+    if (nl[0].n_type != N_UNDF)
+        *(int *) nl[0].n_value = 0;
+
 #ifdef _WIN32
     NtInitialize(&argc, &argv);
 #endif
