an intricate set of m4 macros
